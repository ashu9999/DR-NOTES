{"ast":null,"code":"import _regeneratorRuntime from\"/home/ashutosh/Desktop/pyve/myenv/react-notemaster-master/node_modules/@babel/runtime/regenerator\";import*as actionTypes from'./actionTypes';import axios from'axios';export var authStart=function authStart(){return{type:actionTypes.AUTH_START};};export var authFail=function authFail(error,response){return{type:actionTypes.AUTH_FAIL,error:error,response:response};};export var authSuccess=function authSuccess(token,username){return{type:actionTypes.AUTH_SUCCESS,token:token,username:username};};export var logout=function logout(){localStorage.removeItem('token');localStorage.removeItem('expirationDate');localStorage.removeItem('user');return{type:actionTypes.AUTH_LOGOUT};};export var forgotPassword=function forgotPassword(){return{type:actionTypes.FORGOT_PASSWORD};};export var checkAuthTimeout=function checkAuthTimeout(expirationTime){return function(dispatch){setTimeout(function(){dispatch(logout());},expirationTime*1000);};};export var authLogin=function authLogin(username,password){return function _callee(dispatch){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch(authStart());_context.next=3;return _regeneratorRuntime.awrap(axios.post('https://notemaster.herokuapp.com/api/auth/login/',{username:username,password:password}).then(function(res){var token=res.data.key;var expirationDate=new Date(new Date().getTime()+3600*1000);localStorage.setItem('token',token);localStorage.setItem('expirationDate',expirationDate);localStorage.setItem('user',username);dispatch(authSuccess(token,username));dispatch(checkAuthTimeout(3600));}).catch(function(err){dispatch(authFail(err,err.response));}));case 3:case\"end\":return _context.stop();}}});};};export var authSignup=function authSignup(firstname,lastname,username,email,password1,password2){return function _callee2(dispatch){return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch(authStart());_context2.next=3;return _regeneratorRuntime.awrap(axios.post('https://notemaster.herokuapp.com/api/auth/registration/',{username:username,email:email,first_name:firstname,last_name:lastname,password1:password1,password2:password2}).then(function(res){var token=res.data.key;var expirationDate=new Date(new Date().getTime()+3600*1000);localStorage.setItem('token',token);localStorage.setItem('user',username);localStorage.setItem('expirationDate',expirationDate);dispatch(authSuccess(token,username));dispatch(checkAuthTimeout(3600));}).catch(function(err){dispatch(authFail(err,err.response));}));case 3:case\"end\":return _context2.stop();}}});};};export var authCheckState=function authCheckState(username){return function(dispatch){var token=localStorage.getItem('token');if(token===undefined){dispatch(logout());}else{var expirationDate=new Date(localStorage.getItem('expirationDate'));if(expirationDate<=new Date()){dispatch(logout());}else{dispatch(authSuccess(token,username));dispatch(checkAuthTimeout((expirationDate.getTime()-new Date().getTime())/1000));}}};};","map":null,"metadata":{},"sourceType":"module"}