{"ast":null,"code":"import _regeneratorRuntime from\"/home/ashutosh/Desktop/pyve/myenv/react-notemaster-master/node_modules/@babel/runtime/regenerator\";import _slicedToArray from\"/home/ashutosh/Desktop/pyve/myenv/react-notemaster-master/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,Fragment}from'react';import Avatar from'@material-ui/core/Avatar';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import LockOutlinedIcon from'@material-ui/icons/LockOutlined';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import{connect}from'react-redux';import*as actions from'../store/actions/auth';import{store}from'../index';import{ToastContainer,toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import CircularProgress from'@material-ui/core/CircularProgress';function Copyright(){return React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",align:\"center\"},'Copyright Â© ',React.createElement(Link,{color:\"inherit\",href:\"\"},\"Notemaster\"),' ',new Date().getFullYear(),'.');}var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column',alignItems:'center'},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(3)},submit:{margin:theme.spacing(3,0,2)}};});function SignUp(props){var classes=useStyles();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),firstName=_useState2[0],setFirstName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),lastName=_useState4[0],setLastName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setUsername=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password1=_useState8[0],setPassword1=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password2=_useState12[0],setPassword2=_useState12[1];var _React$useState=React.useState(),_React$useState2=_slicedToArray(_React$useState,2),errResponse=_React$useState2[0],setErrResponse=_React$useState2[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),emailError=_useState14[0],setEmailError=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),usernameError=_useState16[0],setUsernameError=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),passwordError=_useState18[0],setPasswordError=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),passwordMatchError=_useState20[0],setPasswordMatchError=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),active=_useState22[0],setActive=_useState22[1];function validateEmail(email){// eslint-disable-next-line\nvar re=/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;setEmailError(!re.test(String(email).toLowerCase()));}var userNameValidator=function userNameValidator(username){// eslint-disable-next-line\nvar re=/^([a-zA-Z0-9@/./+/-/_]+)$/;var userNameChecker=re.test(String(username).trim().toLowerCase());if(userNameChecker||username.trim()>150){setUsernameError(false);}else{setUsernameError(false);}};var passwordValidator=function passwordValidator(password){var re=/^([0-9]+)$/;var passwordChecker=re.test(password);if(passwordChecker||password.length<8){setPasswordError(true);}else{setPasswordError(false);}};var passwordMatch=function passwordMatch(password2){var password1Value={password1:password1}.password1;if(password1Value!==password2){setPasswordMatchError(true);}else{setPasswordMatchError(false);}};var validator=function validator(){var firstNameValue={firstName:firstName}.firstName;var lastNameValue={lastName:lastName}.lastName;var usernameValue={username:username}.username;var password1Value={password1:password1}.password1;var password2Value={password2:password2}.password2;var emailValue={email:email}.email;if(firstNameValue!==''&&lastNameValue!==''&&usernameValue!==''&&password1Value!==''&&password2Value!==''&&emailValue!==''&&emailError===false&&usernameError===false&&passwordError===false){return false;}else{return true;}};function handleSubmit(e){var email,firstName,lastName,password1,password2,username,welcomeMsg;return _regeneratorRuntime.async(function handleSubmit$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();email=e.target.email.value;firstName=e.target.firstName.value;lastName=e.target.lastName.value;password1=e.target.password1.value;password2=e.target.password2.value;username=e.target.username.value;_context.next=9;return _regeneratorRuntime.awrap(props.onAuth(firstName,lastName,username,email,password1,password2));case 9:if(store.getState().token===null){setErrResponse(Object.values(store.getState().response.data));}if(store.getState().token){welcomeMsg='Welcome '+username;toast.success(welcomeMsg,{position:\"top-right\",autoClose:5000,hideProgressBar:true,closeOnClick:true,pauseOnHover:false});setTimeout(function(){props.history.push('/dashboard/');},5000);}case 11:case\"end\":return _context.stop();}}});}return React.createElement(Container,{component:\"main\",maxWidth:\"xs\"},React.createElement(CssBaseline,null),React.createElement(\"div\",{className:classes.paper},React.createElement(Avatar,{className:classes.avatar},React.createElement(LockOutlinedIcon,null)),React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Sign up\"),props.error?React.createElement(Typography,{component:\"h1\",color:\"error\",variant:\"h5\"},errResponse):null,React.createElement(\"form\",{className:classes.form,onSubmit:handleSubmit,noValidate:true},React.createElement(Grid,{container:true,spacing:2},React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(TextField,{autoComplete:\"fname\",name:\"firstName\",variant:\"outlined\",required:true,fullWidth:true,id:\"firstName\",label:\"First Name\",autoFocus:true,onChange:function onChange(event){setFirstName(event.target.value);validator();}})),React.createElement(Grid,{item:true,xs:12,sm:6},React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"lastName\",label:\"Last Name\",name:\"lastName\",autoComplete:\"lname\",onChange:function onChange(event){setLastName(event.target.value);validator();}})),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",error:emailError,autoComplete:\"email\",onChange:function onChange(event){setEmail(event.target.value);validateEmail(event.target.value);validator();}}),{emailError:emailError}.emailError?React.createElement(Typography,{color:\"error\"},\"Enter a valid email\"):null),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,id:\"username\",label:\"Username\",name:\"username\",autoComplete:\"username\",error:usernameError,onChange:function onChange(event){setUsername(event.target.value);userNameValidator(event.target.value);validator();}}),{usernameError:usernameError}.usernameError?React.createElement(Typography,{color:\"error\"},\"Username can only contain 150 characters or fewer. Letters, digits and @/./+/-/_ only.\"):null),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,name:\"password1\",label:\"Password\",type:\"password\",id:\"password1\",autoComplete:\"current-password\",error:passwordError||passwordMatchError,onChange:function onChange(event){setPassword1(event.target.value);passwordValidator(event.target.value);validator();},onFocus:function onFocus(event){setActive(true);},onBlur:function onBlur(event){setActive(false);}}),{active:active}.active?React.createElement(Fragment,null,React.createElement(Typography,{color:\"primary\"},\"Your password can't be too similar to your other personal information.\"),React.createElement(Typography,{color:\"primary\"},\"Your password must contain at least 8 characters.\"),React.createElement(Typography,{color:\"primary\"},\"Your password can't be a commonly used password.\"),React.createElement(Typography,{color:\"primary\"},\"Your password can't be entirely numeric.\")):null),React.createElement(Grid,{item:true,xs:12},React.createElement(TextField,{variant:\"outlined\",required:true,fullWidth:true,name:\"password2\",label:\"Confrim Password\",type:\"password\",id:\"password2\",autoComplete:\"current-password\",error:passwordMatchError,onChange:function onChange(event){setPassword2(event.target.value);passwordMatch(event.target.value);validator();}}),passwordMatchError?React.createElement(Typography,{color:\"secondary\"},\"Password do not match\"):null)),React.createElement(ToastContainer,null),React.createElement(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,disabled:validator()},props.loading?React.createElement(CircularProgress,{color:\"secondary\"}):'Sign Up'),React.createElement(Grid,{container:true,justify:\"flex-end\"},React.createElement(Grid,{item:true},React.createElement(Link,{to:\"/login/\",variant:\"body2\"},\"Already have an account? Sign in\"))))),React.createElement(Box,{mt:5},React.createElement(Copyright,null)));}var mapStateToProps=function mapStateToProps(state){return{error:state.error,loading:state.loading,token:state.token,response:state.response};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onAuth:function onAuth(firstname,lastname,username,email,password1,password2){return dispatch(actions.authSignup(firstname,lastname,username,email,password1,password2));}};};export default connect(mapStateToProps,mapDispatchToProps)(SignUp);","map":null,"metadata":{},"sourceType":"module"}